module.exports=function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=require("vscode")},function(e,t,r){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.BemHelper=t.ClassNameCases=void 0,function(e){e.Any="any",e.Kebab="kebab",e.Snake="snake",e.Camel="camel",e.Pascal="pascal"}(s=t.ClassNameCases||(t.ClassNameCases={}));t.BemHelper=class{constructor(){this.elementSeparator="__",this.modifierSeparator="--",this.classPropertyValueRegex=/[\s]+class(Name)?=["'`]{1}([^"'`])+["'`]{1}/g,this.classNameRegex=/["'`]{1}(.*)["'`]{1}/,this.kebabCaseRegex=/^[a-z0-9-]+$/,this.snakeCaseRegex=/^[a-z0-9_]+$/,this.pascalCaseRegex=/^[A-Z]{1}[a-zA-Z0-9]+$/,this.camelCaseRegex=/^[a-z]{1}[a-zA-Z0-9]+$/,this.ignoredParentClasses=[],this.languageProviders=[]}generateStyleSheet(e,t){this.resetRegex();let r="",s={};return e.forEach(e=>{if(t)r=`${r}.${e}{}`;else{let t=e.split(this.elementSeparator)[0].split(this.modifierSeparator)[0],r=e.split(this.elementSeparator)[1]?e.split(this.elementSeparator)[1].split(this.modifierSeparator)[0]:null,i=e.split(this.modifierSeparator)[1];t&&(s.hasOwnProperty(t)||(s[t]={},s[t].__BLOCK__MODIFIER__=[]),r&&!s[t].hasOwnProperty(r)&&(s[t][r]=[]),i&&(r?s[t][r].includes(i)||s[t][r].push(i):s[t].__BLOCK__MODIFIER__.push(i)))}}),t||Object.keys(s).forEach(e=>{r=`${r}.${e}{`,Object.keys(s[e]).filter(e=>"__BLOCK__MODIFIER__"!==e).forEach(t=>{r=`${r}&${this.elementSeparator}${t}{`,s[e][t].forEach(e=>{r=`${r}&${this.modifierSeparator}${e}{}`}),r+="}"}),s[e].__BLOCK__MODIFIER__.forEach(e=>{r=`${r}&${this.modifierSeparator}${e}{}`}),r+="}"}),r}getClasses(e,t,r){this.resetRegex();let s=[];if(this.languageProviders.filter(e=>!t||e.language===t).flatMap(e=>e.htmlIgnorePatterns).forEach(t=>{e=e.replace(t," ")}),null===this.classPropertyValueRegex)return s;let i;for(;i=this.classPropertyValueRegex.exec(e);){let e=this.classNameRegex.exec(i[0]);if(null===e||e.length<2)return s;e[1].split(" ").forEach(e=>{""!==e&&-1===s.indexOf(e)&&s.push(e)})}return r?s.flatMap(e=>e.split(this.elementSeparator).flatMap(e=>e.split(this.modifierSeparator))):s}getPrecedingClassName(e,t,r,s,i){let a=this.getClasses(e,i).filter(e=>!this.ignoredParentClasses.includes(e));if(r||(r="explicit-only"),"first-parent"===r){const e=a.pop();if(!e)return;return e.split(this.elementSeparator)[0]}if("prefer-explicit"===r){const r=this.getPrecedingClassName(e,t,"first-parent",!1,i);return this.getPrecedingClassName(e,t,"explicit-only",!1,i)||r}let n=t?a:a.filter(e=>!e.includes(this.elementSeparator));return n=s?n:n.filter(e=>!e.includes(this.modifierSeparator)),n.pop()}getClassCaseType(e){return this.resetRegex(),(e=e.replace(this.elementSeparator,"").replace(this.modifierSeparator,"")).match(this.kebabCaseRegex)?s.Kebab:e.match(this.snakeCaseRegex)?s.Snake:e.match(this.pascalCaseRegex)?s.Pascal:e.match(this.camelCaseRegex)?s.Camel:s.Any}createClass(e){let t="";return t=e.element&&e.modifier?`${e.block}${this.elementSeparator}${e.element}${this.modifierSeparator}${e.modifier}`:!e.element&&e.modifier?`${e.block}${this.modifierSeparator}${e.modifier}`:e.element&&!e.modifier?`${e.block}${this.elementSeparator}${e.element}`:e.block,t}convertStringToCase(e,t){this.resetRegex();let r=e,i=e.replace("-"," ").replace("_"," ").split("").map(e=>e.match(/^[A-Z]$/)?" "+e:e).join("").toLowerCase().trim().split(" ").filter(e=>e);switch(t){case s.Kebab:r=i.join("-");break;case s.Snake:r=i.join("_");break;case s.Camel:r=i.map((e,t)=>0===t?e:`${e[0].toUpperCase()}${e.slice(1)}`).join("");break;case s.Pascal:r=i.map(e=>`${e[0].toUpperCase()}${e.slice(1)}`).join("")}return r}convertClass(e,t){this.resetRegex();let r=e.includes(this.modifierSeparator)?e.split(this.modifierSeparator)[e.split(this.modifierSeparator).length-1]:"",s=e.includes(this.elementSeparator)?e.split(this.elementSeparator)[e.split(this.elementSeparator).length-1].split(this.modifierSeparator)[0]:"",i=e.split(this.elementSeparator)[0],a={block:this.convertStringToCase(i,t),element:this.convertStringToCase(s,t),modifier:this.convertStringToCase(r,t)};return this.createClass(a)}isBemClass(e){return!(!this.modifierSeparator.includes(this.elementSeparator)&&!this.elementSeparator.includes(this.modifierSeparator))||!(e.split(this.elementSeparator).length>2||e.split(this.modifierSeparator).length>2)}isCaseMatch(e,t){let r;switch(this.resetRegex(),e=this.elementSeparator.length>this.modifierSeparator.length?e.replace(this.elementSeparator,"").replace(this.modifierSeparator,""):e.replace(this.modifierSeparator,"").replace(this.elementSeparator,""),t){case s.Any:return!0;case s.Kebab:r=this.kebabCaseRegex;break;case s.Snake:r=this.snakeCaseRegex;break;case s.Pascal:r=this.pascalCaseRegex;break;case s.Camel:r=this.camelCaseRegex;break;default:return!1}return!!e.match(r)}getClassPropertyWord(e){let t="class";return this.languageProviders.forEach(r=>{r.language===e&&(t=r.classAttributeLabel)}),t}registerLanguageProvider(e,t){if(0!==this.languageProviders.filter(t=>t.language===e.language).length&&t)throw new Error("Cannot register duplicate language provider for language: "+e.language);this.languageProviders.push(e)}resetRegex(){this.classPropertyValueRegex.lastIndex=0,this.classNameRegex.lastIndex=0,this.kebabCaseRegex.lastIndex=0,this.snakeCaseRegex.lastIndex=0,this.pascalCaseRegex.lastIndex=0,this.camelCaseRegex.lastIndex=0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigValue=void 0;const s=r(0);t.getConfigValue=function(e,t){let r=s.workspace.getConfiguration().get(e);return void 0!==r?r:t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const s=r(0),i=r(4),a=r(5),n=r(6),o=r(2),l=r(1),c=r(7),d=new l.BemHelper;d.registerLanguageProvider(new c.TypescriptReactLanguageProvider),d.registerLanguageProvider(new c.JavascriptReactLanguageProvider),d.registerLanguageProvider(new c.PhpLanguageProvider);const p=new a.BemHelperCodeActionsProvider(d);function g(e){!function(e){const t=new i.BemCommandProvider(d);let r=o.getConfigValue("bemHelper.elementSeparator","__"),a=o.getConfigValue("bemHelper.modifierSeparator","--");t.setBemSeparators(r,a),e.subscriptions.push(s.commands.registerCommand("extension.bemHelper.insertModifiedElement",()=>{t.insertElementAtCursor(!0)}),s.commands.registerCommand("extension.bemHelper.insertElement",()=>{t.insertElementAtCursor(!1)}),s.commands.registerCommand("extension.bemHelper.generateStyleSheet",()=>{t.generateStyleSheetForCurrentDocument()}),s.commands.registerCommand("extension.bemHelper.generateStyleSheetFromSelection",()=>{t.generateStyleSheetForSelection()}),s.commands.registerCommand("extension.bemHelper.convertSelectionToCase",()=>{t.convertSelectionToCase()}))}(e),function(e){const t=new n.BemDiagnosticProvider(d),r=s.languages.createDiagnosticCollection(t.diagnosticCollectionName);s.window.activeTextEditor&&(t.updateDiagnostics(s.window.activeTextEditor.document,r),a.BemHelperCodeActionsProvider.diagnostics=t.errors);e.subscriptions.push(s.workspace.onDidSaveTextDocument(e=>{t.updateDiagnostics(e,r),a.BemHelperCodeActionsProvider.diagnostics=t.errors}),s.workspace.onDidOpenTextDocument(e=>{t.updateDiagnostics(e,r),a.BemHelperCodeActionsProvider.diagnostics=t.errors}),s.window.onDidChangeActiveTextEditor(e=>{e&&t.updateDiagnostics(e.document,r),a.BemHelperCodeActionsProvider.diagnostics=t.errors})),o.getConfigValue("bemHelper.responsiveLinting",!1)&&e.subscriptions.push(s.workspace.onDidChangeTextDocument(e=>{e&&(t.updateDiagnostics(e.document,r),a.BemHelperCodeActionsProvider.diagnostics=t.errors)}))}(e),function(e){e.subscriptions.push(s.languages.registerCodeActionsProvider("*",p,{providedCodeActionKinds:a.BemHelperCodeActionsProvider.providedCodeActionKinds}))}(e)}t.activate=g,t.deactivate=function(){},t.activate=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemCommandProvider=void 0;const s=r(0),i=r(1),a=r(2);t.BemCommandProvider=class{constructor(e){this.bemHelper=e}setBemSeparators(e,t){this.bemHelper.elementSeparator=e,this.bemHelper.modifierSeparator=t}convertSelectionToCase(){let e=s.window.activeTextEditor;e?s.window.showQuickPick([i.ClassNameCases.Kebab.valueOf(),i.ClassNameCases.Snake.valueOf(),i.ClassNameCases.Pascal.valueOf(),i.ClassNameCases.Camel.valueOf()],{placeHolder:"Choose a class case"}).then(t=>{if(!t)return void s.window.showErrorMessage("No class case selected.");if(!e)return;let r=e.document.getText(e.selection),i=this.bemHelper.convertClass(r,t);e.insertSnippet(new s.SnippetString(""+i))}):s.window.showErrorMessage("No active text editor. Please open a file")}generateStyleSheetForCurrentDocument(){let e=s.window.activeTextEditor;if(!e)return void s.window.showErrorMessage("No active text editor. Please open a file");let t=e.document.getText();this.generateStyleSheetForText(t)}generateStyleSheetForSelection(){let e=s.window.activeTextEditor,t=e.document.getText(e.selection);e?this.generateStyleSheetForText(t):s.window.showErrorMessage("No active text editor. Please open a file")}generateStyleSheetForText(e){s.window.showQuickPick(["scss","less","css"],{placeHolder:"Choose a type of stylesheet to generate"}).then(t=>{if(!t)return void s.window.showErrorMessage("No stylesheet type selected.");let r=s.window.setStatusBarMessage(`Generating ${t}...`),i=this.bemHelper.getClasses(e);if(!i)return;a.getConfigValue("bemHelper.sortGeneratedStylesheets",!1)&&(i=i.sort());let n=this.bemHelper.generateStyleSheet(i,"css"===t);s.workspace.openTextDocument({language:t,content:n}).then(e=>{s.window.showTextDocument(e).then(()=>{s.commands.executeCommand("editor.action.formatDocument")}).then(r.dispose())})})}insertElementAtCursor(e){let t=s.window.activeTextEditor;const r=a.getConfigValue("bemHelper.blockSelectionMode","prefer-explicit");if(this.bemHelper.ignoredParentClasses=a.getConfigValue("bemHelper.ignoreClassNames",["material-icons"]),void 0===t)return void s.window.showErrorMessage("No active text editor. Please open a file");const i=t.document.languageId;let n=this.bemHelper.getPrecedingClassName(t.document.getText(new s.Range(0,0,t.selection.active.line,t.selection.active.character)),!1,r,!1,i);if(null===n)return void s.window.showErrorMessage("Could not find any classes in current file.");let o=this.bemHelper.getClassPropertyWord(t.document.languageId),l="";const c=a.getConfigValue("bemHelper.newLineAfterInsert",!0);l=e?`<\${3:div} ${o}="${n}${this.bemHelper.elementSeparator}$1 ${n}${this.bemHelper.elementSeparator}$1${this.bemHelper.modifierSeparator}$2">$4</$3>${c?"\n":""}$0`:`<\${2:div} ${o}="${n}${this.bemHelper.elementSeparator}$1">$3</$2>${c?"\n":""}$0`,t.insertSnippet(new s.SnippetString(l))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemHelperCodeActionsProvider=void 0;const s=r(0),i=r(1),a=r(2);class n{constructor(e){this.bemHelper=e}provideQuickFixes(e,t){let r=[];if(!this.isQuickFixable(e))return r;let s=t.getText(e.range);if("depth"===e.code)return r;if("case"===e.code){let n=a.getConfigValue("bemHelper.classNameCase",i.ClassNameCases.Any);if(n===i.ClassNameCases.Any)return r;r.push(this.createFix(t,e.range,this.bemHelper.convertClass(s,n),s.length))}return r}isQuickFixable(e){return!0}provideCodeActions(e,t){let r=[];return n.diagnostics.forEach(s=>{if(t.contains(s.range)){let t=this.provideQuickFixes(s,e);r=r.concat(...t)}}),r}createFix(e,t,r,i){const a=new s.CodeAction("Convert to "+r,s.CodeActionKind.QuickFix);return a.edit=new s.WorkspaceEdit,a.edit.replace(e.uri,new s.Range(t.start,t.start.translate(0,i)),r),a}}t.BemHelperCodeActionsProvider=n,n.providedCodeActionKinds=[s.CodeActionKind.QuickFix],n.diagnostics=[]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemDiagnosticProvider=void 0;const s=r(0),i=r(1),a=r(2);t.BemDiagnosticProvider=class{constructor(e){this.diagnosticCollectionName="BemHelper",this.errors=[],this.bemHelper=e;let t=a.getConfigValue("bemHelper.elementSeparator","__"),r=a.getConfigValue("bemHelper.modifierSeparator","--");this.bemHelper.elementSeparator=t,this.bemHelper.modifierSeparator=r}getClassNameDepthProblems(e,t){let r=[],i=this.bemHelper.getClasses(e);return i?(i.forEach(i=>{if(!this.bemHelper.isBemClass(i)){let a=-1;if(""===i)return;for(;-1!==(a=e.indexOf(i,a+1))&&e.length>=a;){const e=t.document.positionAt(a),n=t.document.positionAt(a+i.length);r.push({code:"depth",message:"BEM - classes must only consist of block and element.",range:new s.Range(e,n),severity:s.DiagnosticSeverity.Warning,source:"bem helper",relatedInformation:[new s.DiagnosticRelatedInformation(new s.Location(t.document.uri,new s.Range(new s.Position(e.line,e.character),new s.Position(n.line,n.character))),""+i)]})}}}),r):r}getClassNameCaseProblems(e,t,r,i){let a=[],n=this.bemHelper.getClasses(e,void 0,!0);if(!n)return a;for(const o of n){if(a.length>=i)break;if(r.find(e=>this.bemHelper.isCaseMatch(o,e)))continue;let n=-1;if(""===o)return[];for(;-1!==(n=e.indexOf(o,n+1))&&e.length>=n;){const e=t.document.positionAt(n),i=t.document.positionAt(n+o.length);let l=new s.Range(new s.Position(e.line,0),new s.Position(e.line,1e3));t.document.getText(l).match(this.bemHelper.classPropertyValueRegex)&&a.push({code:"case",message:`BEM - Class names must be in ${r.join(" or ")} case`,range:new s.Range(e,i),severity:s.DiagnosticSeverity.Warning,source:"bem helper",relatedInformation:[new s.DiagnosticRelatedInformation(new s.Location(t.document.uri,new s.Range(new s.Position(e.line,e.character),new s.Position(i.line,i.character))),""+o)]})}}return a.slice(0,i)}updateDiagnostics(e,t){var r;let n=s.window.activeTextEditor;if(void 0===n)return;let o=a.getConfigValue("bemHelper.maxWarningsCount",100);const l=e.getText();let c=new Array;a.getConfigValue("bemHelper.showDepthWarnings",!1)&&(c=c.concat(this.getClassNameDepthProblems(l,n)));const d=s.workspace.getConfiguration().get("bemHelper.classNameCase"),p=null!==(r=null==d?void 0:d.split(",").map(e=>e).filter(e=>e))&&void 0!==r?r:[i.ClassNameCases.Any];p.includes(i.ClassNameCases.Any)||(c=c.concat(this.getClassNameCaseProblems(l,n,p,o))),c.length>0?t.set(e.uri,c):t.clear(),this.errors=c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhpLanguageProvider=t.JavascriptReactLanguageProvider=t.TypescriptReactLanguageProvider=void 0;t.TypescriptReactLanguageProvider=class{constructor(){this.language="typescriptreact",this.classAttributeLabel="className",this.htmlIgnorePatterns=[/\${.*}/g]}};t.JavascriptReactLanguageProvider=class{constructor(){this.language="javascriptreact",this.classAttributeLabel="className",this.htmlIgnorePatterns=[/\${.*}/g]}};t.PhpLanguageProvider=class{constructor(){this.language="php",this.classAttributeLabel="class",this.htmlIgnorePatterns=[/<\?php\s+.*\?>/g]}}}]);
//# sourceMappingURL=extension.js.map